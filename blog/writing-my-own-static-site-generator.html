<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>

    <link id='stylesheet' rel='stylesheet' href='https://ericbanisadr.com/stylesheet.css' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <meta name='msapplication-TileColor' content='#002730' />
    <meta name='theme-color' content='#ffffff' />
    <title>Writing my own static site generator for this blog | Eric Banisadr</title>
  </head>

  <body>
    <header>
      <nav>
        <a href='https://ericbanisadr.com/' title='Home'><h3>Eric Banisadr</h3></a>
        <ul>
          <li><a href='https://ericbanisadr.com/about' title='About'><small>About</small></a></li>
          <li><a href='https://ericbanisadr.com/blog' title='Blog'><small>Blog</small></a></li>
          <li><a href='https://ericbanisadr.com/everything-else' title='Everything else'><small>Everything else</small></a></li>
        </ul>
      </nav>
    </header>
    <main><article>
      <h1>Writing my own static site generator for this blog</h1>
      <small>May 23, 2020</small>
      <p>Before this blog, I had a website that was also hosted on GitHub Pages, but it was generated with Jekyll. I didn’t use it very often, and it didn’t achieve the level of simplicity I hoped for. When I was recently inspired to update my website, I decided to start from scratch, leading to the creation of this site.</p>
<h2>Motivation</h2>
<p>Why I decided to start my website from scratch.</p>
<ul>
<li>I believe nearly everyone in most computing-related fields could benefit from having their own website.</li>
<li>Server-side rendering. Code blocks (and math equations if necessary) are rendered at compile time, removing client-side dependencies.</li>
<li>Inteligibility. Sites like <a href="http://motherfuckingwebsite.com">motherfuckingwebsite.com</a> and <a href="http://bettermotherfuckingwebsite.com">bettermotherfuckingwebsite.com</a> have impressed the importance of not over-complicating the web on me. Additionally the <a href="https://watercss.netlify.app">Water.css stylesheet</a> proves that a lot can be done without fancy frameworks or tools.</li>
<li>To learn. Anyone can make a WordPress site, but I think it worth learning how to make something a little bit lighter and more secure.</li>
</ul>
<h2>Starting out</h2>
<p>I started by copying <a href="https://watercss.netlify.app">Water.css</a> and adapting it with colors that I picked using the <a href="https://color.adobe.com/">Adobe color website</a>. I wrote a quick script to compile markdown with <a href="https://github.com/markdown-it/markdown-it">markdown-it</a> and started trying to make a functional site.</p>
<p>I quickly realized that hardcoding everything was a good way to have different headers on different pages, so I realized I needed to implement a templating system. Many good ones exist, but I chose to use <a href="http://mustache.github.io">mustache.js</a>. To decide which template to use for each file, I borrowed from Jekyll’s idea of using YAML frontmatter, so I updated my compile script to pick a template based on the YAML frontmatter of a page, then render the template using the compiled markdown.</p>
<p>In the process of adding templates, I used another of Jekyll’s ideas—a site configuration file that stores sitewide variables. I knew that I would want to switch to <code>https</code> later on, so I extracted the base URL for my site (<code>http://ericbanisadr.com/</code>) into a variable, so I could add the <code>s</code> later.</p>
<h2>Build system</h2>
<p>Right now, I have a content folder that houses the source for everything on the site. The content is processed, one file at a time, then the rendered version is output to a staging folder, keeping the same directory structure. I chose this approach because it allows me to co-locate related files. For example, an image and a blog post can be stored together in <code>content/blog/example-post</code> as <code>index.md</code> and <code>post-image.jpg</code>, or posts can be stored as individual markdown files like <code>content/blog/example-post.md</code>. In both cases, the post would be accessible at <code>/blog/example-post</code></p>
<p>To implement this, I needed a place to store all my templates and build scripts, so I decided to create a <a href="https://github.com/ebanisadr/website">second GitHub repository with the source of my website</a>. In it, I put <a href="https://github.com/ebanisadr/website/blob/master/compile-markdown.js">the script to compile an individual file</a>, and <a href="https://github.com/ebanisadr/website/blob/master/build-site.js">the script to build the whole site</a>.</p>
<p>They combine for a total of 152 lines of JavaScript, which is pretty good for a home-grown static site generator.</p>
<h2>Enabling HTTPS</h2>
<p>Apparently it’s as simple as checking the box in the GitHub Pages settings now. Not that a static site really needs an encrypted connection, but it does look professional.</p>
<h2>Conclusion</h2>
<p>I have a generally working website after a few days’ work, and I’m happy with it. I basically just re-implemented Jekyll in the end, so maybe my time would’ve been better spent learning Jekyll, but I’m happy that my site is simple enough that the HTML, CSS, and generator are all human-readable because that means I’ll have an easy time maintaining them in the future.</p>
<p>Check out the <a href="https://github.com/ebanisadr/website">source of this site</a>, and feel free to use any part of it you like.</p>

    </article></main>
    <footer>
      <a href='https://ericbanisadr.com/blog/writing-my-own-static-site-generator'>See how I built this site.</a>
      <span class='social-icons'>
        <a title='Eric Banisadr on GitHub' href='https://github.com/ebanisadr' target='_blank'>
          <svg width='20' height='20' xmlns="http://www.w3.org/2000/svg" viewBox="354.07 228.817 43.438 42.367">
            <path fill-rule="evenodd" d="M375.787 228.817c-11.992 0-21.717 9.724-21.717 21.72 0 9.595 6.222 17.736 14.853 20.61 1.087.198 1.483-.473 1.483-1.05 0-.515-.02-1.88-.03-3.692-6.041 1.312-7.316-2.912-7.316-2.912-.988-2.51-2.412-3.177-2.412-3.177-1.972-1.347.15-1.32.15-1.32 2.18.153 3.326 2.238 3.326 2.238 1.938 3.32 5.084 2.36 6.322 1.804.197-1.402.758-2.36 1.378-2.902-4.822-.55-9.893-2.412-9.893-10.735 0-2.372.847-4.31 2.236-5.828-.224-.55-.97-2.757.213-5.748 0 0 1.823-.584 5.972 2.225 1.732-.48 3.59-.72 5.437-.73 1.846.01 3.703.25 5.438.73 4.146-2.81 5.966-2.225 5.966-2.225 1.186 2.99.44 5.199.218 5.748 1.392 1.519 2.232 3.456 2.232 5.828 0 8.344-5.08 10.18-9.916 10.717.778.67 1.473 1.996 1.473 4.023 0 2.903-.027 5.245-.027 5.957 0 .582.392 1.258 1.494 1.046 8.624-2.88 14.84-11.014 14.84-20.607 0-11.996-9.724-21.72-21.72-21.72"/>
          </svg>
        </a>
        <a title='Eric Banisadr on Medium' href='https://medium.com/@ebanisadr' target='_blank'>
          <svg width="20" height="20" viewbox="0 0 195 195" xmlns="http://www.w3.org/2000/svg">
            <g fill-rule="nonzero" fill="none">
            <path d="M0 0h195v195H0z"/>
            <path d="M46.534 65.216a5.074 5.074 0 00-1.651-4.28L32.65 46.2V44h37.98l29.355 64.381L125.795 44H162v2.201l-10.458 10.027a3.057 3.057 0 00-1.162 2.935v73.674a3.057 3.057 0 001.162 2.935l10.213 10.027V148h-51.372v-2.201l10.58-10.272c1.04-1.04 1.04-1.345 1.04-2.934V73.042l-29.417 74.713H88.61L54.362 73.042v50.074a6.908 6.908 0 001.896 5.747l13.76 16.691v2.201H31v-2.2l13.76-16.692a6.663 6.663 0 001.774-5.747v-57.9z" style='fill:var(--background-body)'/>
            </g>
          </svg>
        </a>
        <a title='Eric Banisadr on Twitter' href='https://twitter.com/ebanisadr' target='_blank'>
          <svg width='20' height='20' xmlns="http://www.w3.org/2000/svg" viewBox="15 15 370 370">
            <path d="M0 0h400v400H0z"/>
            <path d="M153.62 301.59c94.34 0 145.94-78.16 145.94-145.94 0-2.22 0-4.43-.15-6.63A104.36 104.36 0 00325 122.47a102.38 102.38 0 01-29.46 8.07 51.47 51.47 0 0022.55-28.37 102.79 102.79 0 01-32.57 12.45 51.34 51.34 0 00-87.41 46.78A145.62 145.62 0 0192.4 107.81a51.33 51.33 0 0015.88 68.47A50.91 50.91 0 0185 169.86v.65a51.31 51.31 0 0041.15 50.28 51.21 51.21 0 01-23.16.88 51.35 51.35 0 0047.92 35.62 102.92 102.92 0 01-63.7 22 104.41 104.41 0 01-12.21-.74 145.21 145.21 0 0078.62 23" style='fill:var(--background-body)'/>
          </svg>
        </a>
        <a title='Eric Banisadr on LinkedIn' href='https://www.linkedin.com/in/ebanisadr' target='_blank'>
          <svg width='20' height='20' viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'>
            <path fill-rule='evenodd' d="M0 4.01A4.01 4.01 0 014.01 0h39.98A4.01 4.01 0 0148 4.01v39.98A4.01 4.01 0 0143.99 48H4.01A4.01 4.01 0 010 43.99V4.01zM19 18.3h6.5v3.266C26.437 19.688 28.838 18 32.445 18 39.359 18 41 21.738 41 28.597V41.3h-7V30.159c0-3.906-.937-6.109-3.32-6.109-3.305 0-4.68 2.375-4.68 6.109V41.3h-7v-23zM7 41h7V18H7v23zm8-30.5a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0z"/>
          </svg>
        </a>
      </span>    </footer>
  </body>
</html>
